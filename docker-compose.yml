version: '3.8'

services:
  # Survival Server - Paper Minecraft server
  survival:
    build:
      context: .
      dockerfile: SurvivalServer/Dockerfile
    container_name: minecraft-survival
    volumes:
      # Persist world data for local development
      - survival-data:/data
    networks:
      - minecraft-network
    restart: unless-stopped
    stdin_open: true
    tty: true

  # BungeeCord Server - Proxy server
  bungeecord:
    build:
      context: .
      dockerfile: BungeeCordServer/Dockerfile
    container_name: minecraft-bungeecord
    ports:
      # Expose BungeeCord to host
      - "25577:25577"
    networks:
      - minecraft-network
    depends_on:
      - survival
    restart: unless-stopped
    stdin_open: true
    tty: true

networks:
  minecraft-network:
    driver: bridge

volumes:
  survival-data:
